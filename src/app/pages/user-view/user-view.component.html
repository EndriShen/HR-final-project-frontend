<!-- <p>user-view works!</p>

<ng-container *ngIf="authService.isLoggedIn()">
    <button class="logout-button" (click)="logout()">Log Out</button>
  </ng-container> -->

  <div class="user-view">
    <div class="user-info">
      <h2>User</h2>
      <p>First Name: {{ user.firstName }}</p>
      <p>Last Name: {{ user.lastName }}</p>
      <p>Days Left: {{ user.daysOff }} / 20</p>
    </div>
  
    <div class="vacation-request">
      <h2 class="title">Request Vacation Days</h2>
      <form (ngSubmit)="onSubmit()">
        <label for="startDay">Start Day:</label>
        <input type="date" id="startDay" name="startDay" [(ngModel)]="vacationRequest.fromDate" required>
  
        <label for="endDay">End Day:</label>
        <input type="date" id="endDay" name="endDay" [(ngModel)]="vacationRequest.toDate" required>
  
        <label for="note">Note:</label>
        <textarea id="note" name="note" [(ngModel)]="vacationRequest.note"></textarea>
  
        <button type="submit">Request</button>
        <div *ngIf="errorMessage" class="alert alert-danger" style="margin-top: 5px;">
          {{ errorMessage }}
        </div>
      </form>
    </div>
  
    <div class="vacation-days-list">
      <h2 class="title">Vacation Days</h2>
      <ul>
        <!-- <li *ngFor="let vacation of vacations">
            {{ vacation.fromDate | date }} - {{ vacation.toDate | date }}
            <span class="status">{{ vacation.status }}</span>
            <button *ngIf="vacation.status === 'PENDING'" (click)="editTimesheet(vacation)">Edit</button>
        </li> -->
        <li *ngFor="let vacation of vacations; let i = index">
            {{ vacation.fromDate | date }} - {{ vacation.toDate | date }}: 
            <span class="status">{{ vacation.status }}</span>
            <button *ngIf="vacation.status === 'PENDING'" (click)="startEdit(vacation, i)" style="margin-left: 10px;">Edit</button>
            
            <!-- Edit form appears right below the timesheet being edited -->
            <div *ngIf="editableTimesheetIndex === i">
              <form (ngSubmit)="onEditSubmit(vacation)">
                <input type="date" [(ngModel)]="vacation.fromDate" name="fromDate{{i}}">
                <input type="date" [(ngModel)]="vacation.toDate" name="toDate{{i}}">
                <textarea [(ngModel)]="vacation.note" name="note{{i}}"></textarea>
                <button type="submit">Save Changes</button>
                <button type="button" class="btn-delete" (click)="deleteTimesheet(vacation.id!, i)">Delete Timesheet</button>
                <button type="button" (click)="cancelEdit()">Cancel</button>
              </form>
            </div>
          </li>
      </ul>
    </div>

    <!-- <div *ngIf="isEditing">
        <form (ngSubmit)="onEditSubmit()">
          <input type="date" [(ngModel)]="editableTimesheet!.fromDate" name="editFromDate">
          <input type="date" [(ngModel)]="editableTimesheet!.toDate" name="editToDate">
          <textarea [(ngModel)]="editableTimesheet!.note" name="editNote"></textarea>
          <button type="submit">Save Changes</button>
          <button type="button" (click)="cancelEdit()">Cancel</button>
        </form>
      </div> -->
  </div>
  